% maxwidth is the original width if it is less than linewidth
% otherwise use linewidth (to make sure the graphics do not exceed the margin)
\makeatletter
\def\maxwidth{ %
  \ifdim\Gin@nat@width>\linewidth
    \linewidth
  \else
    \Gin@nat@width
  \fi
}
\makeatother

\usepackage[utf8]{inputenc}
\usepackage{a4wide,paralist}
\usepackage{amsmath, amssymb, xfrac, amsthm}
\usepackage{dsfont}
\usepackage{xcolor}
\usepackage{amsfonts}
\usepackage{graphicx}
\usepackage{hyperref}
\usepackage{bm}


% for showing python code blocks
\usepackage{listings}
\lstdefinestyle{pythonstyle}{
    language=Python,
    backgroundcolor=\color[HTML]{F0F0F0},
    commentstyle=\color[HTML]{44515E},
    keywordstyle=\color[HTML]{228A96},
    numberstyle=\color[HTML]{F36E3A},
    stringstyle=\color[HTML]{6BA77F},
    basicstyle=\ttfamily\small,        
    breakatwhitespace=false,          
    breaklines=true,                  
    captionpos=b,                     
    keepspaces=true,                  
    numbers=none,                     
    numbersep=5pt,                   
    showspaces=false,                
    showstringspaces=false,
    showtabs=false,                  
    tabsize=4,
    literate=%
        {0}{{{\color[HTML]{F36E3A}0}}}1
        {1}{{{\color[HTML]{F36E3A}1}}}1
        {2}{{{\color[HTML]{F36E3A}2}}}1
        {3}{{{\color[HTML]{F36E3A}3}}}1
        {4}{{{\color[HTML]{F36E3A}4}}}1
        {5}{{{\color[HTML]{F36E3A}5}}}1
        {6}{{{\color[HTML]{F36E3A}6}}}1
        {7}{{{\color[HTML]{F36E3A}7}}}1
        {8}{{{\color[HTML]{F36E3A}8}}}1
        {9}{{{\color[HTML]{F36E3A}9}}}1
        {e+}{{{\color[HTML]{F36E3A}e+}}}1
        {e-}{{{\color[HTML]{F36E3A}e-}}}1,
}

\lstdefinestyle{rstyle}{
    language=R,
    backgroundcolor=\color[HTML]{F0F0F0},
    commentstyle=\color[HTML]{44515E},
    keywordstyle=\color[HTML]{228A96},
    numberstyle=\color[HTML]{F36E3A},
    stringstyle=\color[HTML]{6BA77F},
    basicstyle=\ttfamily\small,        
    breakatwhitespace=false,          
    breaklines=true,                  
    captionpos=b,                     
    keepspaces=true,                  
    numbers=none,                     
    numbersep=5pt,                   
    showspaces=false,                
    showstringspaces=false,
    showtabs=false,                  
    tabsize=4,
    literate=%
        {0}{{{\color[HTML]{F36E3A}0}}}1
        {1}{{{\color[HTML]{F36E3A}1}}}1
        {2}{{{\color[HTML]{F36E3A}2}}}1
        {3}{{{\color[HTML]{F36E3A}3}}}1
        {4}{{{\color[HTML]{F36E3A}4}}}1
        {5}{{{\color[HTML]{F36E3A}5}}}1
        {6}{{{\color[HTML]{F36E3A}6}}}1
        {7}{{{\color[HTML]{F36E3A}7}}}1
        {8}{{{\color[HTML]{F36E3A}8}}}1
        {9}{{{\color[HTML]{F36E3A}9}}}1
        {e+}{{{\color[HTML]{F36E3A}e+}}}1
        {e-}{{{\color[HTML]{F36E3A}e-}}}1,
    alsoletter ={_},
    otherkeywords = {!,!=,~,$,*,\&,\%/\%,\%*\%,\%\%,<-,<<-},
    morekeywords = {str_extract}
}

\lstset{style=pythonstyle}


% %exercise numbering
\renewcommand{\theenumi}{(\alph{enumi})}
\renewcommand{\theenumii}{\roman{enumii}}
\renewcommand\labelenumi{\theenumi}


\font \sfbold=cmssbx10

\setlength{\oddsidemargin}{0cm} \setlength{\textwidth}{16cm}


\sloppy
\parindent0em
\parskip0.5em
\topmargin-2.3 cm
\textheight25cm
\textwidth17.5cm
\oddsidemargin-0.8cm
\pagestyle{empty}


\newcommand{\kopfaml}[2]{
\hrule
\vspace{.15cm}
\begin{minipage}{\textwidth}
%akwardly i had to put \" here to make it compile correctly
	{\sf\bf Advanced Machine Learning \hfill Exercise sheet #1\\
	 \url{https://slds-lmu.github.io/i2ml/} \hfill #2}
\end{minipage}
\vspace{.05cm}
\hrule
\vspace{1cm}}


\newenvironment{allgemein}
	{\noindent}{\vspace{1cm}}

\newcounter{aufg}
\newenvironment{aufgabe}[1]
	{\refstepcounter{aufg}\textbf{Exercise \arabic{aufg}: #1}\\ \noindent}
	{\vspace{0.5cm}}

\newcounter{loes}
\newenvironment{loesung}[1]
	{\refstepcounter{loes}\textbf{Solution \arabic{loes}: #1}\\\noindent}
	{\bigskip}

\newenvironment{bonusaufgabe}
	{\refstepcounter{aufg}\textbf{Exercise \arabic{aufg}*\footnote{This
	is a bonus exercise.}:}\\ \noindent}
	{\vspace{0.5cm}}

\newenvironment{bonusloesung}
	{\refstepcounter{loes}\textbf{Solution \arabic{loes}*:}\\\noindent}
	{\bigskip}
